{extends file="base/body.tpl"}{block name=jquery}    {literal}                $("div.table-toolbar").html("{/literal}{Messages::i18n("userGroupForm.recorded.list")}{literal}").css({            "margin-left" : "26px",            "font-family": "'Poppins', sans-serif",            "font-size" : "1.2rem",            "font-weight" : 500,            "color": "#464646"        });                $(function(){            $(".hotspot").tipTip({maxWidth: "200px", edgeOffset: 3, defaultPosition: "top", delay: 200, fadeOut: 400});            $('input[name="perm[]"]').click(function(){                if( $('input[name="perm[]"]:checked').length > 0){                    $("div#err").html("");                }else{                    $("div#err").html("At least one permission must be selected");                }            });        });        $("#selectAll").click(function(){            if($(this).is(":checked")){                $("input[name='perm[]']").each(function(e){                    $(this).prop('checked',true);                });                if( $('input[name="perm[]"]:checked').length > 0){                    $("div#err").html("");                }            }else{                $("input[name='perm[]']").each(function(e){                    $(this).prop('checked',false);                });                if( $('input[name="perm[]"]:checked').length == 0){                    $("div#err").html("At least one permission must be selected");                }            }        });                $("#groupForm").submit(function(e){            if( $('input[name="perm[]"]:checked').length == 0){                e.preventDefault();                $("div#err").html("At least one permission must be selected");            }else{                $("div#err").html("");            }        });    {/literal}{/block}{block name=styles}    {literal}        .block{            margin-left: 25px;        }                .block li{            padding: 0px;        }                li > label {            color: #777777 !important;        }    {/literal}{/block}{block name=dataTable}    {literal}        paging: true,        "dom": "<'row'<'large-4 medium-4 columns collapsed table-toolbar'><'large-7 medium-7 columns end small-text-left medium-text-right collapsed 'f>>"+            "t"+            "<'row'<'small-12 medium-6 columns'><'small-12 medium-6 columns'p>>"    {/literal}{/block}{block name=content}{nocache}{$msg}    <div class="listTableCaption_simpleTable" style="font-variant:normal;font-weight: 500;margin-top:2px;margin-bottom:2px;color:#414042;font-family:'Poppins', sans-serif;font-size:1.3rem;">        {Messages::i18n("userGroupForm.legend")}    </div>    <div style="margin-left:15px;margin-top:2px;">        <form data-abide name="groupForm" id="groupForm" action="{$actionPage}" method="POST" autocomplete="off">            <input type="hidden" name="id" value="{$group->getId()}"/>                       <div class="row">                <div class="medium-6 large-4 end columns">                    <label><span class="required">{Messages::i18n("userGroupForm.name")}</span>                        <input type="text" name="name" id="name" value="{$group->getName()}" required/>                    </label>                </div>            </div>            <div class="row">                <div class="medium-6 large-4 end columns">                    <label><span class="required">{Messages::i18n("userGroupForm.description")}</span>                        <textarea name="description" rows="2" id="description" style="resize:none;"> {$group->getDescription()} </textarea>                    </label>                </div>            </div>            {foreach from=$categories item=ctg}                {$permisos=$prm->getByCategoryIdForFacility($facilityPerms,$ctg->getId())}                {if $permisos|count gt 0}                    <div class="row">                        <div class="medium-12 columns">                            <span class="permBlock">                               {Messages::i18n($ctg->getMessageResource())}                            </span>                        </div>                    </div>                    <ul class="large-block-grid-3 medium-block-grid-2 small-block-grid-1 block">                         {foreach from=$permisos item=perm}                            <li>                                <label>                                    <input type="checkbox" name="perm[]" value="{$perm->getId()}" {if $perm->getId()|in_array:$selectedPerms} checked="checked" {/if}/>                                    {Messages::i18n($perm->getPermTextKey())}                                    {if $perm->getComments() != ''}                                        <a href="#" class="hintanchorRow" onclick="return false;" onMouseover='showhint("{Messages::i18n($perm->getComments())}", this, event, "180px")'>&nbsp;</a>                                    {/if}                                </label>                             </li>                        {/foreach}                    </ul>                {/if}            {/foreach}                   <div class="row">                <div class="medium-12 columns">                  <hr width="100%" size="2" color="#D0E0F0" style="margin:0px;"/>                </div>            </div>            <div class="row">                <div class="medium-3 end columns selectAll">                    <label><input type="checkbox" id="selectAll"/><span class="selectAll">{Messages::i18n("link.select.all")}</span></label>                </div>            </div>            <div class="row">                <div class="medium-4 end columns">                    <a href="/security/group" class="reset">{Messages::i18n("link.reset")}</a>&nbsp;                    {ElementTag::submitBtn('')}                </div>                {if $group->getId() != ''}                    <div class="medium-4 end columns">                        Confirm&nbsp;<input id="confirmDelete" type="checkbox"/>                        {ElementTag::deleteBtn('',"/security/group/delete/`$group->getId()`")}                    </div>                {/if}            </div>             <div class="row">                <div class="medium-8 end columns">                   <div id="err" class="error"></div>               </div>           </div>            </form>             </div>    {if $list|count gt 0}       <table align="left" id="listTable" class="displayTable" width="98%" cellspacing="0">        <thead>           <tr>               <th class="all">{Messages::i18n("userGroupForm.name")}</th>                <th class="all">{Messages::i18n("userGroupForm.description")}</th>               <th class="all" width="15%">&nbsp;</th>            </tr>        </thead>        <tbody>          {foreach from=$list item=grp}                <tr>                                              <td>{$grp->getName()}</td>                    <td><span class="hotspot" title="{$grp->getDescription()}">{$html->truncateString($grp->getDescription(),80)}</span></td>                   <td>                        {if $grp->getCreatedAtFacilityId() == $smarty.session.facilityId}                            <a title="{Messages::i18n("link.edit")}" class="editRow" href="/security/group/edit/{$grp->getId()}">                                <i class='fas fa-edit' style='font-size:1.5rem;color:#008cba;'></i>                            </a>                        {/if}                   </td>                </tr>           {/foreach}        </tbody>    </table>     {else}     <div class="emptyListMessage">{Messages::i18n("userGroupForm.empty.list.message")}</div>    {/if}{/nocache}{/block}